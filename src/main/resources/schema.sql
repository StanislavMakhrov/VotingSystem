DROP TABLE IF EXISTS DISH CASCADE;
DROP TABLE IF EXISTS MENU CASCADE;     
DROP TABLE IF EXISTS MENU_DISHES CASCADE;              
DROP TABLE IF EXISTS RESTAURANT CASCADE;               
DROP TABLE IF EXISTS USER CASCADE;     
DROP TABLE IF EXISTS USER_VOTES CASCADE;               
DROP TABLE IF EXISTS VOTE CASCADE;
DROP SEQUENCE IF EXISTS SYSTEM_SEQUENCE_2DCDDEA4_2640_46C9_8460_C1FFA8CCCF1C;
DROP SEQUENCE IF EXISTS SYSTEM_SEQUENCE_7E7E4C20_4887_4D57_BB7F_0AFC7CF2C563;
DROP SEQUENCE IF EXISTS SYSTEM_SEQUENCE_6E07BFCA_3BF7_445B_A15F_C796CA78A7AB;
DROP SEQUENCE IF EXISTS SYSTEM_SEQUENCE_93A9BC39_B71B_491D_91E8_26AFADEEEE58;
DROP SEQUENCE IF EXISTS SYSTEM_SEQUENCE_37A9FF5A_81EA_42D6_8C42_B818F6C50266;
CREATE SEQUENCE SYSTEM_SEQUENCE_2DCDDEA4_2640_46C9_8460_C1FFA8CCCF1C START WITH 2;
CREATE SEQUENCE SYSTEM_SEQUENCE_7E7E4C20_4887_4D57_BB7F_0AFC7CF2C563 START WITH 1;
CREATE SEQUENCE SYSTEM_SEQUENCE_6E07BFCA_3BF7_445B_A15F_C796CA78A7AB START WITH 1;
CREATE SEQUENCE SYSTEM_SEQUENCE_93A9BC39_B71B_491D_91E8_26AFADEEEE58 START WITH 1;
CREATE SEQUENCE SYSTEM_SEQUENCE_37A9FF5A_81EA_42D6_8C42_B818F6C50266 START WITH 1;
CREATE TABLE DISH(
    ID INTEGER DEFAULT (NEXT VALUE FOR SYSTEM_SEQUENCE_7E7E4C20_4887_4D57_BB7F_0AFC7CF2C563) NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    PRICE DOUBLE NOT NULL
);          
ALTER TABLE DISH ADD CONSTRAINT CONSTRAINT_2 PRIMARY KEY(ID);   
CREATE TABLE MENU(
    ID INTEGER DEFAULT (NEXT VALUE FOR SYSTEM_SEQUENCE_6E07BFCA_3BF7_445B_A15F_C796CA78A7AB) NOT NULL,
    DATE DATE NOT NULL,
    RESTAURANT_ID INTEGER NOT NULL
);         
ALTER TABLE MENU ADD CONSTRAINT CONSTRAINT_24 PRIMARY KEY(ID);  
CREATE TABLE MENU_DISHES(
    MENU_ID INTEGER NOT NULL,
    DISHES_ID INTEGER NOT NULL
);    
CREATE TABLE RESTAURANT(
    ID INTEGER DEFAULT (NEXT VALUE FOR SYSTEM_SEQUENCE_93A9BC39_B71B_491D_91E8_26AFADEEEE58) NOT NULL,
    NAME VARCHAR(255) NOT NULL
);
ALTER TABLE RESTAURANT ADD CONSTRAINT CONSTRAINT_B PRIMARY KEY(ID);             
CREATE TABLE USER(
    ID INTEGER DEFAULT (NEXT VALUE FOR SYSTEM_SEQUENCE_2DCDDEA4_2640_46C9_8460_C1FFA8CCCF1C) NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    ROLE VARCHAR(255)
);         
ALTER TABLE USER ADD CONSTRAINT CONSTRAINT_27 PRIMARY KEY(ID);  
CREATE TABLE USER_VOTES(
    USER_ID INTEGER NOT NULL,
    VOTES_ID INTEGER NOT NULL
);      
CREATE TABLE VOTE(
    ID INTEGER DEFAULT (NEXT VALUE FOR SYSTEM_SEQUENCE_37A9FF5A_81EA_42D6_8C42_B818F6C50266) NOT NULL,
    DATE DATE NOT NULL,
    RESTAURANT_ID INTEGER NOT NULL,
    USER_ID INTEGER NOT NULL
);          
ALTER TABLE VOTE ADD CONSTRAINT CONSTRAINT_28 PRIMARY KEY(ID);  
ALTER TABLE USER_VOTES ADD CONSTRAINT UK_3Q3XB227UBSK6AVKVATVVD9M9 UNIQUE(VOTES_ID);
ALTER TABLE USER ADD CONSTRAINT UKGJ2FY3DCIX7PH7K8684GKA40C UNIQUE(NAME);       
ALTER TABLE MENU ADD CONSTRAINT UKM7EN2JF8D651E99SRKJ915Q5J UNIQUE(RESTAURANT_ID, DATE);        
ALTER TABLE VOTE ADD CONSTRAINT FK8CS2IXJ0ELMAW4PSRA8HT1MGB FOREIGN KEY(RESTAURANT_ID) REFERENCES RESTAURANT(ID) NOCHECK;
ALTER TABLE MENU ADD CONSTRAINT FKBLWDTXEVPL4MRDS8A12Q0OHU6 FOREIGN KEY(RESTAURANT_ID) REFERENCES RESTAURANT(ID) NOCHECK;
ALTER TABLE MENU_DISHES ADD CONSTRAINT FK4EJBG3V770S3WSY0RFODOV5BR FOREIGN KEY(MENU_ID) REFERENCES MENU(ID) NOCHECK;     
ALTER TABLE MENU_DISHES ADD CONSTRAINT FK8H2NDDQI2N7N96507TPIBNTFX FOREIGN KEY(DISHES_ID) REFERENCES DISH(ID) NOCHECK;   
ALTER TABLE VOTE ADD CONSTRAINT FKCSAKSOE2IEPAJ8BIRRMITHWVE FOREIGN KEY(USER_ID) REFERENCES USER(ID) NOCHECK;